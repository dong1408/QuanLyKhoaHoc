<div class="tw-space-y-[16px]">
    <button nz-button nzType="primary" [routerLink]="['/bai-bao']">
        <span nz-icon nzType="arrow-left" nzTheme="outline"></span>
    </button>
    <h1 class="text-primary tw-text-5xl">CHI TIẾT BÀI BÁO</h1>
    <ng-template [ngIf]="this.loadingService.isLoading$ | async" [ngIfElse]="loaded">
        <app-loading></app-loading>
    </ng-template>
    <ng-template #loaded>
        <div class="tw-mt-[15] tw-flex tw-flex-col tw-gap-[6px]">
            <div class="tw-flex tw-flex-col lg:tw-flex-row lg:tw-items-center tw-gap-[6px]">
                <button
                        nz-button
                        nzType="primary"
                        *ngIf="baibao.deleted_at"
                        [nzLoading]="isRestore"
                        nz-popconfirm
                        nzPopconfirmTitle="Hoàn Tác"
                        (nzOnConfirm)="onHoanTacXoaBaiBao(baibao)"
                >
                    <span nz-icon nzType="rollback" nzTheme="outline"></span>
                    Hoàn Tác
                </button>
                <button
                        nz-button
                        nzType="primary"
                        nzDanger
                        *ngIf="baibao.deleted_at"
                        [nzLoading]="isForceDelete"
                        nz-popconfirm
                        nzPopconfirmTitle="Xóa Bài Báo ?"
                        (nzOnConfirm)="onXoaBaiBao(baibao)"
                >
                    <span nz-icon nzType="delete" nzTheme="outline"></span>
                    Xóa
                </button>
                <button
                        nz-button
                        nzType="primary"
                        nzDanger
                        *ngIf="!baibao.deleted_at"
                        [nzLoading]="isSoftDelete"
                        nz-popconfirm
                        nzPopconfirmTitle="Xóa Mềm ?"
                        (nzOnConfirm)="onXoaMemBaiBao(baibao)"
                >
                    <span nz-icon nzType="delete" nzTheme="outline"></span>
                    Xóa Mềm
                </button>
                <button
                        nz-button
                        nzType="primary"
                        nzDanger
                        *ngIf="baibao.sanpham.trangthairasoat === 'Đã xác nhận' && baibao.deleted_at === null"
                        [nzLoading]="isChangeStatus"
                        nz-popconfirm
                        nzPopconfirmTitle="Hủy Phê Duyệt ?"
                        (nzOnConfirm)="onCapNhatTrangThai(baibao,'Đang rà soát')"
                >
                    <span nz-icon nzType="close"  nzTheme="outline"></span>
                    Hủy Phê Duyệt
                </button>
                <button
                        nz-button
                        nzType="primary"
                        *ngIf="baibao.sanpham.trangthairasoat === 'Đang rà soát'"
                        [nzLoading]="isChangeStatus"
                        nz-popconfirm
                        nzPopconfirmTitle="Phê Duyệt Bài Báo ?"
                        (nzOnConfirm)="onCapNhatTrangThai(baibao,'Đã xác nhận')"
                >
                    <span nz-icon nzType="check" nzTheme="outline"></span>
                    Phê Duyệt
                </button>
            </div>
        </div>
        <div class="tw-space-y-[1rem]">
            <div class="tw-mt-[5rem] tw-space-y-[0.4rem]">
                <h2 class="text-primary tw-text-3xl tw-text-center">Thông Tin Sản Phẩm</h2>
                <div class="tw-space-y-[0.8rem]">
                    <p><strong>Mã: </strong> {{baibao.sanpham.id}}</p>
                    <p><strong>Tên Sản Phẩm: </strong> {{baibao.sanpham.tensanpham}}</p>
                    <p><strong>Loại Sản Phẩm: </strong> {{baibao.sanpham.loaisanpham.tendmsanpham}}</p>
                    <p><strong>Trạng Thái Rà Soát: </strong>
                        <span *ngIf="baibao.sanpham.trangthairasoat === 'Đang rà soát'" class="error">{{baibao.sanpham.trangthairasoat}}</span>
                        <span *ngIf="baibao.sanpham.trangthairasoat === 'Đã xác nhận'" class="success">{{baibao.sanpham.trangthairasoat}}</span>
                    </p>
                    <ng-container *ngIf="baibao.sanpham.trangthairasoat === 'Đã xác nhận'">
                        <p><strong>Người Rà Soát:</strong> <br>
                            <strong class="tw-ml-[30px]"> + Mã: </strong>{{baibao.sanpham.nguoirasoat?.username ?? 'Không Có'}} <br>
                            <strong class="tw-ml-[30px]"> + Tên: </strong>{{baibao.sanpham.nguoirasoat?.name ?? 'Không Có'}} <br>
                            <strong class="tw-ml-[30px]"> + Email: </strong>{{baibao.sanpham.nguoirasoat?.email ?? 'Không Có'}}
                        </p>
                    </ng-container>
                    <p><strong>Tổng Số Tác Giả: </strong> {{baibao.sanpham.tongsotacgia}}</p>
                    <p><strong>Số Lần Đã Quy Đổi: </strong> {{baibao.sanpham.solandaquydoi}}</p>
                    <p><strong>Điểm Quy Đổi: </strong> {{baibao.sanpham.diemquydoi}}</p>
                    <p><strong>Giờ Quy Đổi: </strong> {{baibao.sanpham.gioquydoi}}</p>
                    <p><strong>Thông Tin Chi Tiết: </strong> {{baibao.sanpham.thongtinchitiet}}</p>
                    <p><strong>Cấp Sản Phẩm: </strong> {{baibao.sanpham.capsanpham}}</p>
                    <p><strong>Có Thông Tin Trường ?: </strong> {{baibao.sanpham.cothongtintruong === true ? 'Có' : 'Không'}}</p>
                    <p><strong>Có Sử Dụng Email Trường ?: </strong> {{baibao.sanpham.cosudungemailtruong === true ? 'Có' : 'Không'}}</p>
                    <p><strong>Có Sử Dụng Email Đơn Vị Khác ?: </strong> {{baibao.sanpham.cosudungemaildonvikhac === true ? 'Có' : 'Không'}}</p>
                    <p><strong>Có Thông Tin Đơn Vị Khác ?: </strong> {{baibao.sanpham.cothongtindonvikhac === true ? 'Có' : 'Không'}}</p>
                    <ng-container *ngIf="baibao.sanpham.cothongtindonvikhac === true">
                        <p><strong>Thông Tin Đơn Vị Khác:</strong> <br>
                            <strong class="tw-ml-[30px]"> + Mã: </strong>{{baibao.sanpham.thongtinnoikhac?.matochuc ?? 'Không Có'}} <br>
                            <strong class="tw-ml-[30px]"> + Tên: </strong>{{baibao.sanpham.thongtinnoikhac?.tentochuc ?? 'Không Có'}} <br>
                            <strong class="tw-ml-[30px]"> + Điện Thoại: </strong>{{baibao.sanpham.thongtinnoikhac?.dienthoai ?? 'Không Có'}}
                            <strong class="tw-ml-[30px]"> + Website: </strong>{{baibao.sanpham.thongtinnoikhac?.website ?? 'Không Có'}}
                        </p>
                    </ng-container>
                    <p><strong>Có Nhận Tài Trợ ?: </strong> {{baibao.sanpham.conhantaitro === true ? 'Có' : 'Không'}}</p>
                    <ng-container *ngIf="baibao.sanpham.conhantaitro === true">
                        <p><strong>Đơn Vị Tài Trợ:</strong> <br>
                            <strong class="tw-ml-[30px]"> + Mã: </strong>{{baibao.sanpham.thongtinnoikhac?.matochuc ?? 'Không Có'}} <br>
                            <strong class="tw-ml-[30px]"> + Tên: </strong>{{baibao.sanpham.thongtinnoikhac?.tentochuc ?? 'Không Có'}} <br>
                            <strong class="tw-ml-[30px]"> + Điện Thoại: </strong>{{baibao.sanpham.thongtinnoikhac?.dienthoai ?? 'Không Có'}}
                            <strong class="tw-ml-[30px]"> + Website: </strong>{{baibao.sanpham.thongtinnoikhac?.website ?? 'Không Có'}}
                        </p>
                        <p><strong>Chi Tiết Đơn Vị Tài Trợ: </strong> {{baibao.sanpham.chitietdonvitaitro ?? 'Không Có'}}</p>
                    </ng-container>
                    <p><strong>Ngày Kê Khai: </strong> {{baibao.sanpham.ngaykekhai}}</p>
                    <p><strong>Người Kê Khai:</strong> <br>
                        <strong class="tw-ml-[30px]"> + Mã: </strong>{{baibao.sanpham.nguoikekhai?.username ?? 'Không Có'}} <br>
                        <strong class="tw-ml-[30px]"> + Tên: </strong>{{baibao.sanpham.nguoikekhai?.name ?? 'Không Có'}} <br>
                        <strong class="tw-ml-[30px]"> + Email: </strong>{{baibao.sanpham.nguoikekhai?.email ?? 'Không Có'}}
                    </p>
                    <p><strong>Danh Sách Tác Giả:</strong> <br>
                    <div *ngFor="let tacgia of this.baibao.sanpham_tacgias">
                        <p><strong class="tw-ml-[30px]"> + Tên Tác Giả: </strong>{{tacgia.tacgia.name ?? 'Không Có'}}</p>
                        <p><strong class="tw-ml-[30px]"> + Vai Trò: </strong>{{tacgia.vaitrotacgia.tenvaitro ?? 'Không Có'}} </p>
                        <p><strong class="tw-ml-[30px]"> + Tỷ Lệ Đóng Góp: </strong>{{tacgia.tyledonggop ?? 'Không Có'}} </p>
                        <p><strong class="tw-ml-[30px]"> + Thứ Tự: </strong>{{tacgia.thutu ?? 'Không Có'}} </p>
                    <br>
                </div>
                </div>
            <div class="tw-my-[14px]">
                <nz-divider ></nz-divider>
            </div>
            <div class="tw-mt-[5rem] tw-space-y-[0.4rem]">
                <h2 class="tw-mt-[5rem] text-primary tw-text-3xl tw-text-center">Thông Tin Bài Báo</h2>
                <div class="tw-space-y-[0.8rem]">
                    <p><strong>DOI: </strong> {{baibao.sanpham.id}}</p>
                    <p><strong>Đường Dẫn (URL): </strong> {{baibao.sanpham.tensanpham}}</p>
                    <p><strong>Received: </strong> {{baibao.sanpham.loaisanpham.tendmsanpham}}</p>
                    <p><strong>Accepted: </strong> {{baibao.sanpham.id}}</p>
                    <p><strong>Published: </strong> {{baibao.sanpham.tensanpham}}</p>
                    <p><strong>Keywords: </strong> {{baibao.sanpham.id}}</p>
                    <p><strong>Volume: </strong> {{baibao.sanpham.tensanpham}}</p>
                    <p><strong>Issue: </strong> {{baibao.sanpham.loaisanpham.tendmsanpham}}</p>
                    <p><strong>Number: </strong> {{baibao.sanpham.tensanpham}}</p>
                    <p><strong>Pages: </strong> {{baibao.sanpham.loaisanpham.tendmsanpham}}</p>
                    <p><strong>Tạp Chí:</strong> <br>
                        <strong class="tw-ml-[30px]"> + Mã: </strong>{{baibao.tapchi.id ?? 'Không Có'}} <br>
                        <strong class="tw-ml-[30px]"> + Tên: </strong>{{baibao.tapchi.name ?? 'Không Có'}} <br>
                        <strong class="tw-ml-[30px]"> + Trạng Thái: </strong>
                        <span *ngIf="baibao.tapchi.trangthai" class="success">Đã Phê Duyệt</span>
                        <span *ngIf="!baibao.tapchi.trangthai" class="error">Chưa Phê Duyệt</span> <br>
                        <strong class="tw-ml-[30px]"> + Được Công Nhận ?: </strong>
                        <span *ngIf="baibao.tapchi.khongduoccongnhan === true" class="error">Không Được Công Nhận</span>
                        <span *ngIf="baibao.tapchi.khongduoccongnhan === false" class="success">Được Công Nhận</span>
                        <span *ngIf="baibao.tapchi.khongduoccongnhan === null" class="primary">Không Được Đánh Giá</span>
                    </p>
                    <p><strong>Abstract: </strong> {{baibao.abstract ?? 'Không Có'}}</p>
                </div>
            </div>
            </div>
        </div>
    </ng-template>
</div>